!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react-native")):"function"==typeof define&&define.amd?define(["exports","react-native"],t):t(e.ReduxPersist=e.ReduxPersist||{},e.ReactNative)}(this,function(e,t){"use strict";function r(e){var t=q.call(e,F),r=e[F];try{e[F]=void 0;var n=!0}catch(e){}var o=J.call(e);return n&&(t?e[F]=r:delete e[F]),o}function n(e){return L.call(e)}function o(e){return null==e?void 0===e?D:M:G&&G in Object(e)?r(e):n(e)}function i(e){return null!=e&&"object"==typeof e}function u(e){if(!i(e)||o(e)!=Y)return!1;var t=U(e);if(null===t)return!0;var r=W.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&V.call(r)==X}function c(e){return!!e&&("object"===(void 0===e?"undefined":Z(e))&&("function"!=typeof e.asMutable&&!!u(e)))}function s(){function e(e){var n=!1,o=[];return function(i,u){if(u.type!==K)return t.log&&!n&&o.push(u),e(i,u);t.log&&!n&&a(o),n=!0;var c=u.payload,s=e(i,u);return r(i,c,s,t.log)}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.stateReconciler||l;return function(t){return function(r,n,o){var i=t(e(r),n,o);return $({},i,{replaceReducer:function(t){return i.replaceReducer(e(t))}})}}}function a(e){var t=e.slice(1);t.length>0&&console.log("\n      redux-persist/autoRehydrate: %d actions were fired before rehydration completed. This can be a symptom of a race\n      condition where the rehydrate action may overwrite the previously affected state. Consider running these actions\n      after rehydration:\n    ",t.length,t)}function l(e,t,r,n){var o=$({},r);return Object.keys(t).forEach(function(i){if(e.hasOwnProperty(i)){if("object"===Z(e[i])&&!t[i])return void(n&&console.log("redux-persist/autoRehydrate: sub state for key `%s` is falsy but initial state is an object, skipping autoRehydrate.",i));if(e[i]!==r[i])return n&&console.log("redux-persist/autoRehydrate: sub state for key `%s` modified, skipping autoRehydrate.",i),void(o[i]=r[i]);o[i]=c(t[i])&&c(e[i])?$({},e[i],t[i]):t[i],n&&console.log("redux-persist/autoRehydrate: key `%s`, rehydrated to ",i,o[i])}}),o}function f(e){if("object"!==("undefined"==typeof window?"undefined":Z(window))||!(e in window))return!1;try{var t=window[e],r="redux-persist "+e+" test";t.setItem(r,"test"),t.getItem(r),t.removeItem(r)}catch(e){return!1}return!0}function d(){return f("localStorage")}function y(){return f("sessionStorage")}function g(e){return"local"===e?d()?window.localStorage:{getItem:re,setItem:re,removeItem:re,getAllKeys:re}:"session"===e?y()?window.sessionStorage:{getItem:re,setItem:re,removeItem:re,getAllKeys:re}:void 0}function p(e,t){var r=e.storage,n=void 0!==e.keyPrefix?e.keyPrefix:E;if(Array.isArray(e))throw Error("redux-persist: purgeStoredState requires config as a first argument (found array). An array of keys is the optional second argument.");if(!r)throw Error("redux-persist: config.storage required in purgeStoredState");return void 0===t?new Promise(function(t,o){r.getAllKeys(function(r,i){r?o(r):t(p(e,i.filter(function(e){return 0===e.indexOf(n)}).map(function(e){return e.slice(n.length)})))})}):Promise.all(t.map(function(e){return r.removeItem(""+n+e,h(e))}))}function h(e){return function(e){}}function v(e,t){function r(e){return(!s||-1!==s.indexOf(e))&&-1===c.indexOf(e)}function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return r.serial?y(t,function(e,t){try{var r=u(e),o=a.reduceRight(function(e,r){return r.out(e,t)},r);n=h(n,t,o)}catch(e){}}):n=t,e.dispatch(x(n)),n}function o(e){return""+f+e}var i=!1===t.serialize?function(e){return e}:b,u=!1===t.serialize?function(e){return e}:S,c=t.blacklist||[],s=t.whitelist||!1,a=t.transforms||[],l=t.debounce||!1,f=void 0!==t.keyPrefix?t.keyPrefix:E,d=t._stateInit||{},y=t._stateIterator||O,g=t._stateGetter||w,h=t._stateSetter||k,v=t.storage||ne("local");v.keys&&!v.getAllKeys&&(v.getAllKeys=v.keys);var j=d,I=!1,P=[],A=null;return e.subscribe(function(){if(!I){var t=e.getState();y(t,function(e,n){r(n)&&g(j,n)!==g(t,n)&&-1===P.indexOf(n)&&P.push(n)});var n=P.length;null===A&&(A=setInterval(function(){if(I&&n===P.length||0===P.length)return clearInterval(A),void(A=null);var t=P.shift(),r=o(t),u=a.reduce(function(e,r){return r.in(e,t)},g(e.getState(),t));void 0!==u&&v.setItem(r,i(u),m(t))},l)),j=t}}),{rehydrate:n,pause:function(){I=!0},resume:function(){I=!1},purge:function(e){return p({storage:v,keyPrefix:f},e)}}}function m(e){return function(e){}}function b(e){return oe(e,null,null,function(e,t){throw Error('\n      redux-persist: cannot process cyclical state.\n      Consider changing your state structure to have no cycles.\n      Alternatively blacklist the corresponding reducer key.\n      Cycle encounted at key "'+e+'" with value "'+t+'".\n    ')})}function S(e){return JSON.parse(e)}function x(e){return{type:K,payload:e}}function O(e,t){return Object.keys(e).forEach(function(r){return t(e[r],r)})}function w(e,t){return e[t]}function k(e,t,r){return e[t]=r,e}function j(e,t){function r(e){return!(!o||-1!==o.indexOf(e))||!(!i||-1===i.indexOf(e))}var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.whitelist||null,i=n.blacklist||null;return{in:function(t,n){return!r(n)&&e?e(t,n):t},out:function(e,n){return!r(n)&&t?t(e,n):e}}}function I(e,r){function n(e,r){var n=null;try{var o=s(r);n=f.reduceRight(function(t,r){return r.out(t,e)},o)}catch(r){console.warn("redux-persist/getStoredState: Error in rehydrate restoring data for key:",e,r),t.Alert.alert("redux-persist/getStoredState: Error in rehydrate restoring data for key:"+e)}return n}function o(e,t){r(e,t)}function i(e){return(!l||-1!==l.indexOf(e))&&-1===a.indexOf(e)}function u(e){return""+d+e}var c=e.storage||ne("local"),s=!1===e.serialize?function(e){return e}:P,a=e.blacklist||[],l=e.whitelist||!1,f=e.transforms||[],d=void 0!==e.keyPrefix?e.keyPrefix:E;c.keys&&!c.getAllKeys&&(c=$({},c,{getAllKeys:c.keys}));var y={},g=0;if(c.getAllKeys(function(e,r){e&&(t.Alert.alert("redux-persist/getStoredState: Error in storage.getAllKeys"),console.warn("redux-persist/getStoredState: Error in storage.getAllKeys"),o(e));var s=r.filter(function(e){return 0===e.indexOf(d)}).map(function(e){return e.slice(d.length)}),a=s.filter(i),l=a.length;0===l&&o(null,y),a.forEach(function(e){c.getItem(u(e),function(r,i){r?(t.Alert.alert("redux-persist/getStoredState: Error restoring data for key:"+e),console.warn("redux-persist/getStoredState: Error restoring data for key:",e,r)):y[e]=n(e,i),(g+=1)===l&&o(null,y)})})}),"function"!=typeof r&&Promise)return new Promise(function(e,t){r=function(r,n){r?t(r):e(n)}})}function P(e){return JSON.parse(e)}function A(e){function t(e,t){u.resume(),n&&n(e,t)}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],o=!r.skipRestore,i=null,u=v(e,r);return u.pause(),te(o?function(){I(r,function(r,n){if(r)return void t(r);i&&("*"===i?n={}:i.forEach(function(e){return delete n[e]}));try{e.dispatch(R(n,r))}finally{t(r,n)}})}:t),$({},u,{purge:function(e){return i=e||"*",u.purge(e)}})}function R(e){return{type:K,payload:e,error:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}}var E="reduxPersist:",K="persist/REHYDRATE",T="object"==typeof global&&global&&global.Object===Object&&global,_="object"==typeof self&&self&&self.Object===Object&&self,C=T||_||Function("return this")(),N=C.Symbol,z=Object.prototype,q=z.hasOwnProperty,J=z.toString,F=N?N.toStringTag:void 0,H=Object.prototype,L=H.toString,M="[object Null]",D="[object Undefined]",G=N?N.toStringTag:void 0,U=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),Y="[object Object]",B=Function.prototype,Q=Object.prototype,V=B.toString,W=Q.hasOwnProperty,X=V.call(Object),Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$=Object.assign||function(e){for(var t=1;arguments.length>t;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee="undefined"!=typeof global&&void 0!==global.setImmediate,te=ee?function(e,t){return global.setImmediate(e,t)}:function(e,t){return setTimeout(e,t)},re=function(){return null},ne=function(e,t){var r=g(e);return{getAllKeys:function(e){return new Promise(function(t,n){try{for(var o=[],i=0;r.length>i;i++)o.push(r.key(i));te(function(){e&&e(null,o),t(o)})}catch(t){e&&e(t),n(t)}})},getItem:function(e,t){return new Promise(function(n,o){try{var i=r.getItem(e);te(function(){t&&t(null,i),n(i)})}catch(e){t&&t(e),o(e)}})},setItem:function(e,t,n){return new Promise(function(o,i){try{r.setItem(e,t),te(function(){n&&n(null),o()})}catch(e){n&&n(e),i(e)}})},removeItem:function(e,t){return new Promise(function(n,o){try{r.removeItem(e),te(function(){t&&t(null),n()})}catch(e){t&&t(e),o(e)}})}}},oe=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){function r(e,t,r,o){return JSON.stringify(e,n(t,o),r)}function n(e,t){var r=[],n=[];return null==t&&(t=function(e,t){return r[0]===t?"[Circular ~]":"[Circular ~."+n.slice(0,r.indexOf(t)).join(".")+"]"}),function(o,i){if(r.length>0){var u=r.indexOf(this);~u?r.splice(u+1):r.push(this),~u?n.splice(u,1/0,o):n.push(o),~r.indexOf(i)&&(i=t.call(this,o,i))}else r.push(i);return null==e?i:e.call(this,o,i)}}t=e.exports=r,t.getSerialize=n}),ie=function(e,t,r){console.error('redux-persist: this method of importing storages has been removed. instead use `import { asyncLocalStorage } from "redux-persist/storages"`'),"function"==typeof e&&e(),"function"==typeof t&&t(),"function"==typeof r&&r()},ue={getAllKeys:ie,getItem:ie,setItem:ie,removeItem:ie},ce={asyncLocalStorage:ue,asyncSessionStorage:ue};t.Alert.alert("Hello from redux persist"),e.autoRehydrate=s,e.createPersistor=v,e.createTransform=j,e.getStoredState=I,e.persistStore=A,e.purgeStoredState=p,e.storages=ce,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=redux-persist.min.js.map
